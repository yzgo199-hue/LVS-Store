<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6f0ec3; -webkit-text-stroke: #6f0ec3}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0e6e6d; -webkit-text-stroke: #0e6e6d}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4d5055; -webkit-text-stroke: #4d5055}
    span.s1 {font-kerning: none; color: #6f0ec3; background-color: #ecf1f7; -webkit-text-stroke: 0px #6f0ec3}
    span.s2 {font-kerning: none; background-color: #ecf1f7}
    span.s3 {font-kerning: none; color: #0e6e6d; background-color: #ecf1f7; -webkit-text-stroke: 0px #0e6e6d}
    span.s4 {font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s5 {font-kerning: none; color: #000000; background-color: #ecf1f7; -webkit-text-stroke: 0px #000000}
    span.s6 {font-kerning: none}
    span.s7 {font-kerning: none; color: #a4450b; background-color: #ecf1f7; -webkit-text-stroke: 0px #a4450b}
    span.s8 {font-kerning: none; color: #6b0001; background-color: #ecf1f7; -webkit-text-stroke: 0px #6b0001}
    span.s9 {font-kerning: none; color: #4d5055; background-color: #ecf1f7; -webkit-text-stroke: 0px #4d5055}
    span.s10 {font-kerning: none; color: #bf1c25; background-color: #ecf1f7; -webkit-text-stroke: 0px #bf1c25}
  </style>
</head>
<body>
<p class="p1"><span class="s1">import</span><span class="s2"> </span><span class="s3">React</span><span class="s2">, { useState, useEffect } </span><span class="s1">from</span><span class="s2"> </span><span class="s4">'react'</span><span class="s2">;</span></p>
<p class="p1"><span class="s1">import</span><span class="s2"> { initializeApp } </span><span class="s1">from</span><span class="s2"> </span><span class="s4">'firebase/app'</span><span class="s2">;</span></p>
<p class="p2"><span class="s2">import</span><span class="s5"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>getAuth,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>signInAnonymously,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>onAuthStateChanged,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>signInWithCustomToken</span></p>
<p class="p3"><span class="s5">} </span><span class="s1">from</span><span class="s5"> </span><span class="s2">'firebase/auth'</span><span class="s5">;</span></p>
<p class="p2"><span class="s2">import</span><span class="s5"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>getFirestore,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>collection,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>doc,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>setDoc,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>getDoc,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>onSnapshot,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>addDoc,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>updateDoc,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>deleteDoc,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>arrayUnion,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>arrayRemove</span></p>
<p class="p3"><span class="s5">} </span><span class="s1">from</span><span class="s5"> </span><span class="s2">'firebase/firestore'</span><span class="s5">;</span></p>
<p class="p2"><span class="s2">import</span><span class="s5"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">ShoppingCart</span><span class="s5">, </span><span class="s2">User</span><span class="s5">, </span><span class="s2">LogOut</span><span class="s5">, </span><span class="s2">Package</span><span class="s5">, </span><span class="s2">Plus</span><span class="s5">, </span><span class="s2">Trash2</span><span class="s5">,<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">Store</span><span class="s5"> </span><span class="s1">as</span><span class="s5"> </span><span class="s2">StoreIcon</span><span class="s5">, </span><span class="s2">DollarSign</span><span class="s5">, </span><span class="s2">MessageSquare</span><span class="s5">,<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">Send</span><span class="s5">, </span><span class="s2">Lock</span><span class="s5">, </span><span class="s2">Mail</span><span class="s5">, </span><span class="s2">Globe</span><span class="s5">, </span><span class="s2">Sparkles</span><span class="s5">, </span><span class="s2">X</span><span class="s5">, </span><span class="s2">Briefcase</span><span class="s5">,</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">Film</span><span class="s5">, </span><span class="s2">Image</span><span class="s5"> </span><span class="s1">as</span><span class="s5"> </span><span class="s2">ImageIcon</span><span class="s5">, </span><span class="s2">Volume2</span><span class="s5">, </span><span class="s2">VolumeX</span><span class="s5">,</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">ThumbsUp</span><span class="s5">, </span><span class="s2">ThumbsDown</span><span class="s5">, </span><span class="s2">BadgeCheck</span><span class="s5">, </span><span class="s2">Clock</span><span class="s5">, </span><span class="s2">Truck</span><span class="s5">,<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">CheckCircle</span><span class="s5">, </span><span class="s2">MapPin</span><span class="s5">, </span><span class="s2">AlertCircle</span><span class="s5">, </span><span class="s2">Gavel</span><span class="s5">, </span><span class="s2">Timer</span></p>
<p class="p3"><span class="s5">} </span><span class="s1">from</span><span class="s5"> </span><span class="s2">'lucide-react'</span><span class="s5">;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s2">// --- Firebase Configuration ---</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> firebaseConfig = </span><span class="s3">JSON</span><span class="s2">.parse(__firebase_config);</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> app = initializeApp(firebaseConfig);</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> auth = getAuth(app);</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> db = getFirestore(app);</span></p>
<p class="p6"><span class="s2">// CONSTANT APP ID to ensure persistence across code edits within the same artifact</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> appId = </span><span class="s1">typeof</span><span class="s2"> __app_id !== </span><span class="s4">'undefined'</span><span class="s2"> ? __app_id : </span><span class="s4">'levstore-v2'</span><span class="s2">;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s2">// --- UI Components ---</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">Button</span><span class="s2"> = ({ children, onClick, variant = </span><span class="s4">'primary'</span><span class="s2">, className = </span><span class="s4">''</span><span class="s2">, </span><span class="s1">type</span><span class="s2"> = </span><span class="s4">"button"</span><span class="s2">, disabled = </span><span class="s1">false</span><span class="s2">, icon: </span><span class="s3">Icon</span><span class="s2"> }) =&gt; {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s5"> baseStyle = </span><span class="s2">"px-4 py-2.5 rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm tracking-wide"</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> variants = {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>primary: </span><span class="s2">"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200"</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>secondary: </span><span class="s2">"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>danger: </span><span class="s2">"bg-red-50 text-red-600 hover:bg-red-100 border border-red-100"</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>ghost: </span><span class="s2">"text-gray-400 hover:text-gray-600"</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>dark: </span><span class="s2">"bg-gray-900 text-white hover:bg-gray-800"</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>outline: </span><span class="s2">"border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50"</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>glass: </span><span class="s2">"bg-white/20 backdrop-blur-md border border-white/30 text-white hover:bg-white/30"</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">return</span><span class="s5"> (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;button </span><span class="s1">type</span><span class="s2">={</span><span class="s1">type</span><span class="s2">} onClick={onClick} disabled={disabled} className={</span><span class="s4">`</span><span class="s2">${baseStyle}</span><span class="s4"> </span><span class="s2">${variants[variant]}</span><span class="s4"> </span><span class="s2">${className}</span><span class="s4">`</span><span class="s2">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>{</span><span class="s3">Icon</span><span class="s2"> &amp;&amp; &lt;</span><span class="s3">Icon</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} /&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>{children}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>);</span></p>
<p class="p1"><span class="s2">};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">Input</span><span class="s2"> = ({ label, </span><span class="s1">type</span><span class="s2"> = </span><span class="s4">"text"</span><span class="s2">, value, onChange, placeholder, required = </span><span class="s1">false</span><span class="s2">, icon: </span><span class="s3">Icon</span><span class="s2">, name, step }) =&gt; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>&lt;div className=</span><span class="s4">"mb-4"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>&lt;label className=</span><span class="s2">"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2 ml-1"</span><span class="s5">&gt;{label}&lt;/label&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;div className=</span><span class="s4">"relative group"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>{</span><span class="s3">Icon</span><span class="s5"> &amp;&amp; &lt;div className=</span><span class="s2">"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-600 transition-colors"</span><span class="s5">&gt;&lt;</span><span class="s3">Icon</span><span class="s5"> size={</span><span class="s7">18</span><span class="s5">} /&gt;&lt;/div&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;input</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>name={name}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">type</span><span class="s2">={</span><span class="s1">type</span><span class="s2">} value={value} onChange={onChange} required={required} placeholder={placeholder} step={step}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>className={</span><span class="s2">`w-full bg-gray-50 border border-gray-100 text-gray-900 rounded-xl px-4 py-3.5 </span><span class="s5">${</span><span class="s3">Icon</span><span class="s5"> ? </span><span class="s2">'pl-12'</span><span class="s5"> : </span><span class="s2">''</span><span class="s5">}</span><span class="s2"> focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-600 focus:bg-white outline-none transition-all`</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>/&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2">);</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">Badge</span><span class="s2"> = ({ children, color = </span><span class="s4">'indigo'</span><span class="s2"> }) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> colors = {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>indigo: </span><span class="s2">'bg-indigo-100 text-indigo-700'</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>green: </span><span class="s2">'bg-emerald-100 text-emerald-700'</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>yellow: </span><span class="s2">'bg-amber-100 text-amber-700'</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>red: </span><span class="s2">'bg-red-100 text-red-700'</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>blue: </span><span class="s2">'bg-blue-100 text-blue-700'</span><span class="s5">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> &lt;span className={</span><span class="s4">`px-2 py-0.5 rounded-md text-[10px] font-black uppercase tracking-wider </span><span class="s2">${colors[color] || colors.indigo}</span><span class="s4">`</span><span class="s2">}&gt;{children}&lt;/span&gt;;</span></p>
<p class="p1"><span class="s2">};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">CountDown</span><span class="s2"> = ({ targetDate }) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [timeLeft, setTimeLeft] = useState(</span><span class="s4">''</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> interval = setInterval(() =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> now = </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().getTime();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> distance = </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">(targetDate).getTime() - now;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">      </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (distance &lt; </span><span class="s7">0</span><span class="s2">) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setTimeLeft(</span><span class="s4">'EXPIRED'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>clearInterval(interval);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> hours = </span><span class="s3">Math</span><span class="s2">.floor((distance % (</span><span class="s7">1000</span><span class="s2"> * </span><span class="s7">60</span><span class="s2"> * </span><span class="s7">60</span><span class="s2"> * </span><span class="s7">24</span><span class="s2">)) / (</span><span class="s7">1000</span><span class="s2"> * </span><span class="s7">60</span><span class="s2"> * </span><span class="s7">60</span><span class="s2">));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> minutes = </span><span class="s3">Math</span><span class="s2">.floor((distance % (</span><span class="s7">1000</span><span class="s2"> * </span><span class="s7">60</span><span class="s2"> * </span><span class="s7">60</span><span class="s2">)) / (</span><span class="s7">1000</span><span class="s2"> * </span><span class="s7">60</span><span class="s2">));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> seconds = </span><span class="s3">Math</span><span class="s2">.floor((distance % (</span><span class="s7">1000</span><span class="s2"> * </span><span class="s7">60</span><span class="s2">)) / </span><span class="s7">1000</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setTimeLeft(</span><span class="s4">`</span><span class="s2">${hours}</span><span class="s4">h </span><span class="s2">${minutes}</span><span class="s4">m </span><span class="s2">${seconds}</span><span class="s4">s`</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}, </span><span class="s7">1000</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">return</span><span class="s2"> () =&gt; clearInterval(interval);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, [targetDate]);</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> &lt;span className={</span><span class="s4">`font-mono font-bold </span><span class="s2">${timeLeft === </span><span class="s4">'EXPIRED'</span><span class="s2"> ? </span><span class="s4">'text-red-500'</span><span class="s2"> : </span><span class="s4">'text-indigo-600'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">}&gt;{timeLeft}&lt;/span&gt;;</span></p>
<p class="p1"><span class="s2">};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s2">// --- Helper for Media ---</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> isVideo = (url) =&gt; {</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">if</span><span class="s5"> (!url) </span><span class="s2">return</span><span class="s5"> </span><span class="s2">false</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> url.match(</span><span class="s8">/\.(mp4|webm|ogg|mov)$/</span><span class="s1">i</span><span class="s2">) || url.includes(</span><span class="s4">'youtube'</span><span class="s2">) || url.includes(</span><span class="s4">'vimeo'</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2">};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s2">// --- Main App ---</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p2"><span class="s2">export</span><span class="s5"> </span><span class="s2">default</span><span class="s5"> </span><span class="s2">function</span><span class="s5"> </span><span class="s3">App</span><span class="s5">() {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [user, setUser] = useState(</span><span class="s1">null</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [view, setView] = useState(</span><span class="s4">'auth'</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [authMode, setAuthMode] = useState(</span><span class="s4">'login'</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [products, setProducts] = useState([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [auctions, setAuctions] = useState([]); </span><span class="s9">// New Auction State</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [orders, setOrders] = useState([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [cart, setCart] = useState([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [notification, setNotification] = useState(</span><span class="s1">null</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [activeOrderChat, setActiveOrderChat] = useState(</span><span class="s1">null</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [activeProduct, setActiveProduct] = useState(</span><span class="s1">null</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [loading, setLoading] = useState(</span><span class="s1">true</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [isFirebaseReady, setIsFirebaseReady] = useState(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [muted, setMuted] = useState(</span><span class="s1">true</span><span class="s2">);</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">// --- 1. Init Firebase Auth ---</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> initAuth = </span><span class="s1">async</span><span class="s2"> () =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">if</span><span class="s2"> (</span><span class="s1">typeof</span><span class="s2"> __initial_auth_token !== </span><span class="s4">'undefined'</span><span class="s2"> &amp;&amp; __initial_auth_token) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">await</span><span class="s2"> signInWithCustomToken(auth, __initial_auth_token);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">await</span><span class="s2"> signInAnonymously(auth);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>} </span><span class="s1">catch</span><span class="s2"> (err) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>console.error(</span><span class="s4">"Firebase connection error"</span><span class="s2">, err);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>};</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>initAuth();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> unsubscribe = onAuthStateChanged(auth, (u) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (u) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setIsFirebaseReady(</span><span class="s1">true</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> savedUsername = localStorage.getItem(</span><span class="s4">'levstore_username'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">if</span><span class="s2"> (savedUsername) restoreSession(savedUsername);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">else</span><span class="s2"> setLoading(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">return</span><span class="s2"> () =&gt; unsubscribe();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, []);</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">// --- 2. Cloud Persistence Logic ---</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> restoreSession = </span><span class="s1">async</span><span class="s2"> (username) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> docRef = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'accounts'</span><span class="s2">, username);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> snap = </span><span class="s1">await</span><span class="s2"> getDoc(docRef);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (snap.exists()) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> data = snap.data();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setUser({ username, ...data });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setView(</span><span class="s4">'store'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>notify(</span><span class="s4">`Welcome back, </span><span class="s2">${username}</span><span class="s4">`</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>localStorage.removeItem(</span><span class="s4">'levstore_username'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (err) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>console.error(</span><span class="s4">"Session restore failed"</span><span class="s2">, err);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">finally</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setLoading(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleRegister = </span><span class="s1">async</span><span class="s2"> (username, password, email, role) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!isFirebaseReady) </span><span class="s1">return</span><span class="s2"> notify(</span><span class="s4">"Connecting to cloud..."</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setLoading(</span><span class="s1">true</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> docRef = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'accounts'</span><span class="s2">, username);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> snap = </span><span class="s1">await</span><span class="s2"> getDoc(docRef);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (snap.exists()) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>notify(</span><span class="s2">"Username already taken!"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setLoading(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> userData = {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>password, email, role,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>isAuthorized: </span><span class="s1">false</span><span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>createdAt: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString(),<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>uid: auth.currentUser.uid</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> setDoc(docRef, userData);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>localStorage.setItem(</span><span class="s4">'levstore_username'</span><span class="s2">, username);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setUser({ username, ...userData });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setView(</span><span class="s4">'store'</span><span class="s2">);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>notify(</span><span class="s2">"Account created &amp; saved to cloud!"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (err) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>console.error(err);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>notify(</span><span class="s2">"Registration failed."</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">finally</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setLoading(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleLogin = </span><span class="s1">async</span><span class="s2"> (username, password) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!isFirebaseReady) </span><span class="s1">return</span><span class="s2"> notify(</span><span class="s4">"Connecting to cloud..."</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setLoading(</span><span class="s1">true</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> docRef = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'accounts'</span><span class="s2">, username);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> snap = </span><span class="s1">await</span><span class="s2"> getDoc(docRef);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (snap.exists()) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> data = snap.data();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">if</span><span class="s2"> (data.password === password) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>localStorage.setItem(</span><span class="s4">'levstore_username'</span><span class="s2">, username);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>setUser({ username, ...data });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>setView(</span><span class="s4">'store'</span><span class="s2">);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>notify(</span><span class="s2">"Logged in successfully"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>notify(</span><span class="s2">"Incorrect password"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>notify(</span><span class="s2">"Account not found"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (err) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>console.error(err);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>notify(</span><span class="s2">"Login error. Check connection."</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">finally</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setLoading(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleLogout = () =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>localStorage.removeItem(</span><span class="s4">'levstore_username'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setUser(</span><span class="s1">null</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setView(</span><span class="s4">'auth'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setCart([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">// --- 3. Data Sync ---</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!user || !isFirebaseReady) </span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s2">// Products Sync</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> prodRef = collection(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'products'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> unsubProd = onSnapshot(prodRef, (snap) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setProducts(snap.docs.map(d =&gt; ({ id: d.id, ...d.data() })));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s2">// Auctions Sync</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> auctRef = collection(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'auctions'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> unsubAuct = onSnapshot(auctRef, (snap) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setAuctions(snap.docs.map(d =&gt; ({ id: d.id, ...d.data() })).sort((a,b) =&gt; </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">(a.endTime) - </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">(b.endTime)));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s2">// Orders Sync</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> orderRef = collection(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'orders'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> unsubOrders = onSnapshot(orderRef, (snap) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> allData = snap.docs.map(d =&gt; ({ id: d.id, ...d.data() }));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> myOrders = allData.filter(o =&gt; o.buyerUsername === user.username || o.items.some(i =&gt; i.sellerUsername === user.username));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setOrders(myOrders);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s2">// Account Sync</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> myAcctRef = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'accounts'</span><span class="s2">, user.username);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> unsubAcct = onSnapshot(myAcctRef, (snap) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2">(snap.exists()) setUser(prev =&gt; ({...prev, ...snap.data()}));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">return</span><span class="s2"> () =&gt; { unsubProd(); unsubOrders(); unsubAcct(); unsubAuct(); };</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, [user?.username, isFirebaseReady]);</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">// --- Actions ---</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> notify = (msg) =&gt; { setNotification(msg); setTimeout(() =&gt; setNotification(</span><span class="s1">null</span><span class="s2">), </span><span class="s7">3000</span><span class="s2">); };</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> addProduct = </span><span class="s1">async</span><span class="s2"> (name, price, icon, mediaUrl) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> addDoc(collection(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'products'</span><span class="s2">), {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>name,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>price: parseFloat(price),<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>icon,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>mediaUrl: mediaUrl || </span><span class="s4">''</span><span class="s2">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>sellerUsername: user.username,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>sellerAuthorized: user.isAuthorized || </span><span class="s1">false</span><span class="s2">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>likes: [],</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>dislikes: [],</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>comments: [],</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>createdAt: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString()</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>notify(</span><span class="s2">"Item listed on Levstore!"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (err) { notify(</span><span class="s4">"Error listing item."</span><span class="s2">); }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> startAuction = </span><span class="s1">async</span><span class="s2"> (name, startPrice, durationHrs, icon, mediaUrl) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> endTime = </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">(</span><span class="s3">Date</span><span class="s2">.now() + (durationHrs * </span><span class="s7">60</span><span class="s2"> * </span><span class="s7">60</span><span class="s2"> * </span><span class="s7">1000</span><span class="s2">)).toISOString();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> addDoc(collection(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'auctions'</span><span class="s2">), {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>name,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>startPrice: parseFloat(startPrice),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>currentBid: parseFloat(startPrice),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>highestBidder: </span><span class="s1">null</span><span class="s2">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>endTime,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>icon,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>mediaUrl: mediaUrl || </span><span class="s4">''</span><span class="s2">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>sellerUsername: user.username,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>sellerAuthorized: user.isAuthorized || </span><span class="s1">false</span><span class="s2">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>bids: [],</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>createdAt: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString()</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>notify(</span><span class="s2">"Auction started!"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (err) { notify(</span><span class="s4">"Error starting auction."</span><span class="s2">); }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> placeBid = </span><span class="s1">async</span><span class="s2"> (auctionId, currentBid, bidAmount) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (user.role === </span><span class="s4">'seller'</span><span class="s2">) </span><span class="s1">return</span><span class="s2"> notify(</span><span class="s4">"Sellers cannot bid."</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (bidAmount &lt;= currentBid) </span><span class="s1">return</span><span class="s2"> notify(</span><span class="s4">"Bid must be higher than current price."</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> ref = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'auctions'</span><span class="s2">, auctionId);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> updateDoc(ref, {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>currentBid: parseFloat(bidAmount),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>highestBidder: user.username,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>bids: arrayUnion({ user: user.username, amount: parseFloat(bidAmount), time: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString() })</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>notify(</span><span class="s2">"Bid placed successfully!"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2">(err) { notify(</span><span class="s4">"Failed to place bid."</span><span class="s2">); }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> placeOrder = </span><span class="s1">async</span><span class="s2"> () =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (cart.length === </span><span class="s7">0</span><span class="s2">) </span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> addDoc(collection(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'orders'</span><span class="s2">), {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>buyerUsername: user.username,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>items: cart.map(c =&gt; ({...c, sellerUsername: c.sellerUsername})),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>total: cart.reduce((s, i) =&gt; s + (i.price * i.quantity), </span><span class="s7">0</span><span class="s2">),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>status: </span><span class="s4">'placed'</span><span class="s2">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>statusHistory: [{ status: </span><span class="s4">'placed'</span><span class="s2">, time: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString() }],</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>messages: [],</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>createdAt: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString()</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setCart([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setView(</span><span class="s4">'orders'</span><span class="s2">);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>notify(</span><span class="s2">"Order placed! Saved to cloud."</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (err) { notify(</span><span class="s4">"Checkout failed."</span><span class="s2">); }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> updateOrderStatus = </span><span class="s1">async</span><span class="s2"> (orderId, newStatus) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> order = orders.find(o =&gt; o.id === orderId);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!order) </span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">await</span><span class="s2"> updateDoc(doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'orders'</span><span class="s2">, orderId), {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>status: newStatus,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>statusHistory: arrayUnion({ status: newStatus, time: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString() })</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>notify(</span><span class="s2">`Order status updated to </span><span class="s5">${newStatus}</span><span class="s2">`</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> sendMessage = </span><span class="s1">async</span><span class="s2"> (orderId, text) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> order = orders.find(o =&gt; o.id === orderId);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!order) </span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> newMsg = { sender: user.username, text, time: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString() };</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">await</span><span class="s2"> updateDoc(doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'orders'</span><span class="s2">, orderId), {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>messages: [...order.messages, newMsg]</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleLike = </span><span class="s1">async</span><span class="s2"> (productId, currentLikes) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> ref = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'products'</span><span class="s2">, productId);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (currentLikes?.includes(user.username)) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> updateDoc(ref, { likes: arrayRemove(user.username) });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> updateDoc(ref, { likes: arrayUnion(user.username), dislikes: arrayRemove(user.username) });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleDislike = </span><span class="s1">async</span><span class="s2"> (productId, currentDislikes) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> ref = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'products'</span><span class="s2">, productId);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (currentDislikes?.includes(user.username)) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> updateDoc(ref, { dislikes: arrayRemove(user.username) });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> updateDoc(ref, { dislikes: arrayUnion(user.username), likes: arrayRemove(user.username) });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> postComment = </span><span class="s1">async</span><span class="s2"> (productId, text) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!text.trim()) </span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> ref = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'products'</span><span class="s2">, productId);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">await</span><span class="s2"> updateDoc(ref, {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>comments: arrayUnion({ user: user.username, text, time: </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().toISOString() })</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> deleteProduct = </span><span class="s1">async</span><span class="s2"> (id, collectionName = </span><span class="s4">'products'</span><span class="s2">) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">await</span><span class="s2"> deleteDoc(doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, collectionName, id));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>notify(</span><span class="s4">"Item removed"</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2">(err) { notify(</span><span class="s4">"Could not delete item"</span><span class="s2">); }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> toggleAuthorized = </span><span class="s1">async</span><span class="s2"> () =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> ref = doc(db, </span><span class="s4">'artifacts'</span><span class="s2">, appId, </span><span class="s4">'public'</span><span class="s2">, </span><span class="s4">'data'</span><span class="s2">, </span><span class="s4">'accounts'</span><span class="s2">, user.username);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">await</span><span class="s2"> updateDoc(ref, { isAuthorized: !user.isAuthorized });</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>notify(user.isAuthorized ? </span><span class="s2">"Auth tag removed"</span><span class="s5"> : </span><span class="s2">"You are now an Authorized User"</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">// --- Views ---</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> </span><span class="s3">OrderStatusStepper</span><span class="s2"> = ({ currentStatus }) =&gt; {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s5"> steps = [</span><span class="s2">'placed'</span><span class="s5">, </span><span class="s2">'processing'</span><span class="s5">, </span><span class="s2">'shipped'</span><span class="s5">, </span><span class="s2">'delivered'</span><span class="s5">];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> currentIndex = steps.indexOf(currentStatus) === -</span><span class="s7">1</span><span class="s2"> ? </span><span class="s7">0</span><span class="s2"> : steps.indexOf(currentStatus);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">return</span><span class="s2"> (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;div className=</span><span class="s2">"flex items-center justify-between w-full mt-4 mb-2"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{steps.map((step, idx) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">const</span><span class="s2"> completed = idx &lt;= currentIndex;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">const</span><span class="s2"> icons = { placed: </span><span class="s3">Clock</span><span class="s2">, processing: </span><span class="s3">Package</span><span class="s2">, shipped: </span><span class="s3">Truck</span><span class="s2">, delivered: </span><span class="s3">CheckCircle</span><span class="s2"> };</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">const</span><span class="s2"> </span><span class="s3">StepIcon</span><span class="s2"> = icons[step];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">return</span><span class="s2"> (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div key={step} className=</span><span class="s2">"flex flex-col items-center relative z-10"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className={</span><span class="s2">`w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-300 </span><span class="s5">${completed ? </span><span class="s2">'bg-indigo-600 text-white'</span><span class="s5"> : </span><span class="s2">'bg-gray-200 text-gray-400'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;</span><span class="s3">StepIcon</span><span class="s2"> size={</span><span class="s7">14</span><span class="s2">} /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;span className={</span><span class="s2">`text-[10px] font-bold mt-1 uppercase tracking-wider </span><span class="s5">${completed ? </span><span class="s2">'text-indigo-600'</span><span class="s5"> : </span><span class="s2">'text-gray-400'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;{step}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>})}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"absolute left-0 right-0 top-4 h-0.5 bg-gray-200 -z-0 mx-8"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">           </span>&lt;div className=</span><span class="s4">"h-full bg-indigo-600 transition-all duration-500"</span><span class="s2"> style={{width: </span><span class="s4">`</span><span class="s2">${(currentIndex / (steps.length - </span><span class="s7">1</span><span class="s2">)) * </span><span class="s7">100</span><span class="s2">}</span><span class="s4">%`</span><span class="s2">}}&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> (loading) </span><span class="s1">return</span><span class="s2"> (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>&lt;div className=</span><span class="s2">"min-h-screen bg-white flex items-center justify-center"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;div className=</span><span class="s2">"flex flex-col items-center gap-4"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"</span><span class="s5">&gt;&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;p className=</span><span class="s2">"text-indigo-600 font-bold tracking-widest animate-pulse"</span><span class="s5">&gt;</span><span class="s3">CONNECTING</span><span class="s5">...&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>);</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">// AUTH VIEW</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> (view === </span><span class="s4">'auth'</span><span class="s2"> || !user) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">return</span><span class="s2"> (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;div className=</span><span class="s2">"min-h-screen flex flex-col lg:flex-row bg-white"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"lg:w-1/2 bg-gray-900 p-12 text-white flex flex-col justify-between relative overflow-hidden"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"absolute top-0 right-0 w-full h-full opacity-20 pointer-events-none"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s2">"absolute top-[-10%] right-[-10%] w-[60%] h-[60%] bg-indigo-500 rounded-full blur-[120px]"</span><span class="s5">&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s4">"relative z-10"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"flex items-center gap-2 mb-12"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s4">"bg-indigo-600 p-2 rounded-xl"</span><span class="s2">&gt;&lt;</span><span class="s3">StoreIcon</span><span class="s2"> className=</span><span class="s4">"w-8 h-8"</span><span class="s2"> /&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;span className=</span><span class="s4">"text-2xl font-black tracking-tighter"</span><span class="s2">&gt;</span><span class="s3">LEV</span><span class="s2">&lt;span className=</span><span class="s4">"text-indigo-400"</span><span class="s2">&gt;</span><span class="s3">STORE</span><span class="s2">&lt;/span&gt;&lt;/span&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>&lt;span className=</span><span class="s2">"block text-[10px] font-mono text-gray-400"</span><span class="s5">&gt;</span><span class="s3">MADE</span><span class="s5"> </span><span class="s3">BY</span><span class="s5"> </span><span class="s3">LSV</span><span class="s5">&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;h1 className=</span><span class="s2">"text-5xl font-extrabold leading-tight mb-6"</span><span class="s5">&gt;{authMode === </span><span class="s2">'login'</span><span class="s5"> ? </span><span class="s2">'Welcome Back.'</span><span class="s5"> : </span><span class="s2">'Join the Future.'</span><span class="s5">}&lt;/h1&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;p className=</span><span class="s4">"text-gray-400 text-lg max-w-md"</span><span class="s2">&gt;</span><span class="s3">Secure</span><span class="s2">, cloud-based marketplace. </span><span class="s3">Persistent</span><span class="s2"> accounts </span><span class="s1">for</span><span class="s2"> every version.&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"lg:w-1/2 p-8 lg:p-24 flex flex-col justify-center"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s4">"max-w-md w-full mx-auto"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;h2 className=</span><span class="s2">"text-3xl font-bold mb-2 text-slate-900"</span><span class="s5">&gt;{authMode === </span><span class="s2">'login'</span><span class="s5"> ? </span><span class="s2">'Sign In'</span><span class="s5"> : </span><span class="s2">'Create Account'</span><span class="s5">}&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;form onSubmit={(e) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>e.preventDefault();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s1">const</span><span class="s2"> fd = </span><span class="s1">new</span><span class="s2"> </span><span class="s3">FormData</span><span class="s2">(e.target);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s1">if</span><span class="s2"> (authMode === </span><span class="s4">'login'</span><span class="s2">) handleLogin(fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'username'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'password'</span><span class="s2">));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s1">else</span><span class="s2"> handleRegister(fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'username'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'password'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'email'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'role'</span><span class="s2">));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>}}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Username"</span><span class="s2"> name=</span><span class="s4">"username"</span><span class="s2"> placeholder=</span><span class="s4">"johndoe"</span><span class="s2"> icon={</span><span class="s3">User</span><span class="s2">} required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>{authMode === </span><span class="s4">'register'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Email"</span><span class="s2"> name=</span><span class="s4">"email"</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"email"</span><span class="s2"> placeholder=</span><span class="s4">"you@example.com"</span><span class="s2"> icon={</span><span class="s3">Mail</span><span class="s2">} required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;div className=</span><span class="s4">"mb-6"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;label className=</span><span class="s2">"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2"</span><span class="s5">&gt;</span><span class="s3">Account</span><span class="s5"> </span><span class="s3">Type</span><span class="s5">&lt;/label&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s4">"grid grid-cols-2 gap-4"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;label className=</span><span class="s4">"cursor-pointer"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;input </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"radio"</span><span class="s2"> name=</span><span class="s4">"role"</span><span class="s2"> value=</span><span class="s4">"buyer"</span><span class="s2"> defaultChecked className=</span><span class="s4">"hidden peer"</span><span class="s2"> /&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                        </span>&lt;div className=</span><span class="s2">"p-4 border-2 rounded-xl text-center peer-checked:border-indigo-600 peer-checked:bg-indigo-50 font-bold text-gray-500 peer-checked:text-indigo-600 transition-all"</span><span class="s5">&gt;</span><span class="s3">Buyer</span><span class="s5">&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;label className=</span><span class="s4">"cursor-pointer"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;input </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"radio"</span><span class="s2"> name=</span><span class="s4">"role"</span><span class="s2"> value=</span><span class="s4">"seller"</span><span class="s2"> className=</span><span class="s4">"hidden peer"</span><span class="s2"> /&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                        </span>&lt;div className=</span><span class="s2">"p-4 border-2 rounded-xl text-center peer-checked:border-indigo-600 peer-checked:bg-indigo-50 font-bold text-gray-500 peer-checked:text-indigo-600 transition-all"</span><span class="s5">&gt;</span><span class="s3">Seller</span><span class="s5">&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Password"</span><span class="s2"> name=</span><span class="s4">"password"</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"password"</span><span class="s2"> placeholder=</span><span class="s4">"••••••••"</span><span class="s2"> icon={</span><span class="s3">Lock</span><span class="s2">} required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;</span><span class="s3">Button</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"submit"</span><span class="s2"> className=</span><span class="s4">"w-full py-4 mt-4"</span><span class="s2"> disabled={loading}&gt;{loading ? </span><span class="s4">'Processing...'</span><span class="s2"> : (authMode === </span><span class="s4">'login'</span><span class="s2"> ? </span><span class="s4">'Sign In'</span><span class="s2"> : </span><span class="s4">'Create Account'</span><span class="s2">)}&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/form&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"mt-8 text-center text-sm text-gray-500"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;button onClick={() =&gt; setAuthMode(authMode === </span><span class="s4">'login'</span><span class="s2"> ? </span><span class="s4">'register'</span><span class="s2"> : </span><span class="s4">'login'</span><span class="s2">)} className=</span><span class="s4">"font-bold text-indigo-600 hover:underline"</span><span class="s2">&gt;{authMode === </span><span class="s4">'login'</span><span class="s2"> ? </span><span class="s4">'Create Account'</span><span class="s2"> : </span><span class="s4">'Log In'</span><span class="s2">}&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">// MAIN VIEW</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">return</span><span class="s5"> (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>&lt;div className=</span><span class="s2">"min-h-screen bg-[#FDFDFD] text-slate-900 pb-20"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>{notification &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"fixed top-24 right-6 z-[100] bg-gray-900 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 animate-bounce"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;</span><span class="s3">Sparkles</span><span class="s2"> className=</span><span class="s4">"text-yellow-400"</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">} /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;span className=</span><span class="s4">"font-bold"</span><span class="s2">&gt;{notification}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>)}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span>{</span><span class="s2">/* Nav */</span><span class="s5">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;nav className=</span><span class="s2">"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100 supports-[backdrop-filter]:bg-white/60"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"max-w-7xl mx-auto px-4 sm:px-6 h-20 flex justify-between items-center"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s4">"flex items-center gap-3 cursor-pointer"</span><span class="s2"> onClick={() =&gt; setView(</span><span class="s4">'store'</span><span class="s2">)}&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"bg-indigo-600 p-1.5 rounded-lg shadow-lg shadow-indigo-100"</span><span class="s5">&gt;&lt;</span><span class="s3">StoreIcon</span><span class="s5"> className=</span><span class="s2">"w-6 h-6 text-white"</span><span class="s5"> /&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">               </span>&lt;span className=</span><span class="s2">"font-black text-xl sm:text-2xl tracking-tighter leading-none"</span><span class="s5">&gt;</span><span class="s3">LEV</span><span class="s5">&lt;span className=</span><span class="s2">"text-indigo-600"</span><span class="s5">&gt;</span><span class="s3">STORE</span><span class="s5">&lt;/span&gt;&lt;/span&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">               </span>&lt;span className=</span><span class="s2">"block text-[8px] sm:text-[10px] font-mono text-gray-400 leading-none"</span><span class="s5">&gt;</span><span class="s3">MADE</span><span class="s5"> </span><span class="s3">BY</span><span class="s5"> </span><span class="s3">LSV</span><span class="s5">&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"flex items-center gap-4 sm:gap-6 overflow-x-auto no-scrollbar pl-2"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setView(</span><span class="s2">'store'</span><span class="s5">)} className={</span><span class="s2">`text-xs sm:text-sm font-bold tracking-widest uppercase whitespace-nowrap </span><span class="s5">${view === </span><span class="s2">'store'</span><span class="s5"> ? </span><span class="s2">'text-indigo-600'</span><span class="s5"> : </span><span class="s2">'text-gray-400 hover:text-gray-600'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;</span><span class="s3">Market</span><span class="s5">&lt;/button&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setView(</span><span class="s2">'auctions'</span><span class="s5">)} className={</span><span class="s2">`text-xs sm:text-sm font-bold tracking-widest uppercase whitespace-nowrap flex items-center gap-1 </span><span class="s5">${view === </span><span class="s2">'auctions'</span><span class="s5"> ? </span><span class="s2">'text-indigo-600'</span><span class="s5"> : </span><span class="s2">'text-gray-400 hover:text-gray-600'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;&lt;</span><span class="s3">Gavel</span><span class="s5"> size={</span><span class="s7">14</span><span class="s5">}/&gt; </span><span class="s3">Auctions</span><span class="s5">&lt;/button&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setView(</span><span class="s2">'reels'</span><span class="s5">)} className={</span><span class="s2">`text-xs sm:text-sm font-bold tracking-widest uppercase whitespace-nowrap flex items-center gap-1 </span><span class="s5">${view === </span><span class="s2">'reels'</span><span class="s5"> ? </span><span class="s2">'text-indigo-600'</span><span class="s5"> : </span><span class="s2">'text-gray-400 hover:text-gray-600'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;&lt;</span><span class="s3">Film</span><span class="s5"> size={</span><span class="s7">14</span><span class="s5">}/&gt; </span><span class="s3">Reels</span><span class="s5">&lt;/button&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>{user?.role === </span><span class="s2">'seller'</span><span class="s5"> &amp;&amp; &lt;button onClick={() =&gt; setView(</span><span class="s2">'dashboard'</span><span class="s5">)} className={</span><span class="s2">`text-xs sm:text-sm font-bold tracking-widest uppercase whitespace-nowrap </span><span class="s5">${view === </span><span class="s2">'dashboard'</span><span class="s5"> ? </span><span class="s2">'text-indigo-600'</span><span class="s5"> : </span><span class="s2">'text-gray-400 hover:text-gray-600'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;</span><span class="s3">Sell</span><span class="s5">&lt;/button&gt;}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setView(</span><span class="s2">'orders'</span><span class="s5">)} className={</span><span class="s2">`text-xs sm:text-sm font-bold tracking-widest uppercase whitespace-nowrap </span><span class="s5">${view === </span><span class="s2">'orders'</span><span class="s5"> ? </span><span class="s2">'text-indigo-600'</span><span class="s5"> : </span><span class="s2">'text-gray-400 hover:text-gray-600'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;</span><span class="s3">Orders</span><span class="s5">&lt;/button&gt;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"h-8 w-px bg-gray-200 hidden sm:block"</span><span class="s5">&gt;&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;button onClick={() =&gt; setView(</span><span class="s2">'cart'</span><span class="s5">)} className=</span><span class="s2">"relative p-2 text-gray-600 hover:bg-gray-50 rounded-full transition-all"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;</span><span class="s3">ShoppingCart</span><span class="s2"> size={</span><span class="s7">22</span><span class="s2">} /&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>{cart.length &gt; </span><span class="s7">0</span><span class="s5"> &amp;&amp; &lt;span className=</span><span class="s2">"absolute top-0 right-0 w-5 h-5 bg-indigo-600 text-[10px] text-white flex items-center justify-center rounded-full font-bold ring-4 ring-white"</span><span class="s5">&gt;{cart.length}&lt;/span&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"flex items-center gap-3 group cursor-pointer"</span><span class="s5"> onClick={handleLogout} title=</span><span class="s2">"Log Out / Switch Account"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"w-10 h-10 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center font-bold uppercase border-2 border-transparent group-hover:border-indigo-100"</span><span class="s5">&gt;{user?.username?.[</span><span class="s7">0</span><span class="s5">]}&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/nav&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span>{</span><span class="s2">/* Content */</span><span class="s5">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;main className=</span><span class="s2">"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-12"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{view === </span><span class="s4">'store'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"space-y-12 animate-in fade-in duration-500"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{</span><span class="s9">/* Hero */</span><span class="s2">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"bg-indigo-600 rounded-[2.5rem] p-8 sm:p-12 text-white relative overflow-hidden shadow-2xl shadow-indigo-200 min-h-[300px] flex items-center"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s4">"relative z-10 max-w-xl"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                 </span>&lt;h2 className=</span><span class="s2">"text-4xl sm:text-5xl font-black mb-4 leading-tight"</span><span class="s5">&gt;</span><span class="s3">Levstore</span><span class="s5"> </span><span class="s3">Global</span><span class="s5"> </span><span class="s3">Market</span><span class="s5">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;p className=</span><span class="s4">"text-indigo-100 text-lg mb-8 opacity-80"</span><span class="s2">&gt;</span><span class="s3">Real</span><span class="s2">-time cloud inventory. </span><span class="s3">Explore</span><span class="s2"> </span><span class="s3">Reels</span><span class="s2"> or check the </span><span class="s3">Auction</span><span class="s2"> </span><span class="s3">House</span><span class="s2">.&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;div className=</span><span class="s4">"flex gap-4"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">Button</span><span class="s2"> onClick={() =&gt; setView(</span><span class="s4">'reels'</span><span class="s2">)} variant=</span><span class="s4">"glass"</span><span class="s2"> className=</span><span class="s4">"backdrop-blur-xl bg-white/10"</span><span class="s2"> icon={</span><span class="s3">Film</span><span class="s2">}&gt;</span><span class="s3">Watch</span><span class="s2"> </span><span class="s3">Reels</span><span class="s2">&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">Button</span><span class="s2"> onClick={() =&gt; setView(</span><span class="s4">'auctions'</span><span class="s2">)} variant=</span><span class="s4">"glass"</span><span class="s2"> className=</span><span class="s4">"backdrop-blur-xl bg-white/10"</span><span class="s2"> icon={</span><span class="s3">Gavel</span><span class="s2">}&gt;</span><span class="s3">Bid</span><span class="s2"> </span><span class="s3">Now</span><span class="s2">&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s2">"absolute right-[-10%] top-[-20%] w-[50%] h-[150%] bg-white/5 rotate-12 blur-3xl"</span><span class="s5">&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{</span><span class="s9">/* Grid */</span><span class="s2">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>{products.map(p =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>&lt;div key={p.id} onClick={() =&gt; setActiveProduct(p)} className=</span><span class="s2">"bg-white group cursor-pointer rounded-[2rem] p-4 border border-gray-100 hover:shadow-2xl transition-all duration-500 flex flex-col h-full relative"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;div className=</span><span class="s2">"aspect-square bg-slate-50 rounded-[1.5rem] overflow-hidden mb-4 relative group-hover:bg-indigo-50 transition-colors"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>{p.mediaUrl ? (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>isVideo(p.mediaUrl) ? &lt;video src={p.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2"> muted loop onMouseOver={e =&gt; e.target.play()} onMouseOut={e =&gt; e.target.pause()} /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                        </span>: &lt;img src={p.mediaUrl} alt={p.name} className=</span><span class="s2">"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"</span><span class="s5"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>) : (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;div className=</span><span class="s2">"w-full h-full flex items-center justify-center text-7xl"</span><span class="s5">&gt;&lt;span className=</span><span class="s2">"group-hover:scale-110 transition-transform duration-500"</span><span class="s5">&gt;{p.icon}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>)}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s2">"absolute bottom-3 right-3 flex gap-2"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;div className=</span><span class="s4">"bg-white/80 backdrop-blur px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1"</span><span class="s2">&gt;&lt;</span><span class="s3">ThumbsUp</span><span class="s2"> size={</span><span class="s7">12</span><span class="s2">} className={p.likes?.includes(user.username) ? </span><span class="s4">'text-indigo-600'</span><span class="s2"> : </span><span class="s4">''</span><span class="s2">} /&gt; {p.likes?.length || </span><span class="s7">0</span><span class="s2">}&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;div className=</span><span class="s4">"px-2 flex flex-col flex-1"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s2">"flex justify-between items-start mb-2"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;h3 className=</span><span class="s2">"font-black text-xl text-slate-900 truncate flex-1 pr-2"</span><span class="s5">&gt;{p.name}&lt;/h3&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;span className=</span><span class="s4">"font-bold text-indigo-600"</span><span class="s2">&gt;${p.price}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;p className=</span><span class="s2">"text-xs font-bold text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-1"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;</span><span class="s3">User</span><span class="s2"> size={</span><span class="s7">12</span><span class="s2">}/&gt; {p.sellerUsername} {p.sellerAuthorized &amp;&amp; &lt;</span><span class="s3">BadgeCheck</span><span class="s2"> size={</span><span class="s7">14</span><span class="s2">} className=</span><span class="s4">"text-blue-500 fill-blue-100"</span><span class="s2"> /&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>{user.role === </span><span class="s4">'buyer'</span><span class="s2"> ? (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;</span><span class="s3">Button</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>onClick={(e) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>e.stopPropagation();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>setCart(prev =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span></span><span class="s1">const</span><span class="s2"> ex = prev.find(i =&gt; i.id === p.id);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span></span><span class="s1">return</span><span class="s2"> ex ? prev.map(i =&gt; i.id === p.id ? {...i, quantity: i.quantity+</span><span class="s7">1</span><span class="s2">} : i) : [...prev, {...p, quantity: </span><span class="s7">1</span><span class="s2">}];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>notify(</span><span class="s4">`Added </span><span class="s2">${p.name}</span><span class="s4"> to cart`</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>}}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>className=</span><span class="s4">"w-full rounded-2xl py-3.5 mt-auto"</span><span class="s2"> variant=</span><span class="s4">"dark"</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s3">Add</span><span class="s2"> to </span><span class="s3">Cart</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>) : (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                        </span>&lt;</span><span class="s3">Button</span><span class="s5"> disabled className=</span><span class="s2">"w-full rounded-2xl py-3.5 mt-auto bg-gray-100 text-gray-400 shadow-none cursor-not-allowed"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s3">Seller</span><span class="s2"> </span><span class="s3">Account</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{products.length === </span><span class="s7">0</span><span class="s2"> &amp;&amp; &lt;p className=</span><span class="s4">"text-center text-gray-400 font-bold py-10"</span><span class="s2">&gt;</span><span class="s3">Market</span><span class="s2"> </span><span class="s3">Empty</span><span class="s2">&lt;/p&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{view === </span><span class="s4">'auctions'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"space-y-8 animate-in fade-in duration-500"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s2">"text-center max-w-2xl mx-auto mb-12"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s2">"bg-indigo-100 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 text-indigo-600"</span><span class="s5">&gt;&lt;</span><span class="s3">Gavel</span><span class="s5"> size={</span><span class="s7">32</span><span class="s5">}/&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;h2 className=</span><span class="s4">"text-4xl font-black mb-4"</span><span class="s2">&gt;</span><span class="s3">Auction</span><span class="s2"> </span><span class="s3">House</span><span class="s2">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;p className=</span><span class="s4">"text-gray-400"</span><span class="s2">&gt;</span><span class="s3">Bid</span><span class="s2"> on exclusive items </span><span class="s1">in</span><span class="s2"> real-time. </span><span class="s3">Highest</span><span class="s2"> bidder wins when the timer runs </span><span class="s1">out</span><span class="s2">.&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s2">"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>{auctions.map(a =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s1">const</span><span class="s2"> isEnded = </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">(a.endTime) &lt; </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s1">return</span><span class="s2"> (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;div key={a.id} className=</span><span class="s2">"bg-white rounded-[2rem] border border-gray-100 overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;div className=</span><span class="s4">"h-48 bg-slate-50 relative"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>{a.mediaUrl ? (isVideo(a.mediaUrl) ? &lt;video src={a.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2">/&gt; : &lt;img src={a.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2">/&gt;) : &lt;div className=</span><span class="s4">"w-full h-full flex items-center justify-center text-6xl"</span><span class="s2">&gt;{a.icon}&lt;/div&gt;}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                          </span>&lt;div className=</span><span class="s2">"absolute top-4 right-4 bg-black/70 backdrop-blur text-white px-3 py-1 rounded-full text-xs font-mono font-bold flex items-center gap-2"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span>&lt;</span><span class="s3">Timer</span><span class="s2"> size={</span><span class="s7">12</span><span class="s2">}/&gt; &lt;</span><span class="s3">CountDown</span><span class="s2"> targetDate={a.endTime} /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;div className=</span><span class="s4">"p-6"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;h3 className=</span><span class="s4">"text-xl font-black mb-1"</span><span class="s2">&gt;{a.name}&lt;/h3&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;p className=</span><span class="s4">"text-xs text-gray-400 font-bold uppercase tracking-widest mb-4"</span><span class="s2">&gt;</span><span class="s3">Seller</span><span class="s2">: {a.sellerUsername}&lt;/p&gt;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                          </span>&lt;div className=</span><span class="s2">"bg-indigo-50 rounded-xl p-4 mb-6 flex justify-between items-end"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span>&lt;div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                               </span>&lt;p className=</span><span class="s2">"text-[10px] font-bold text-indigo-400 uppercase tracking-widest mb-1"</span><span class="s5">&gt;</span><span class="s3">Current</span><span class="s5"> </span><span class="s3">Bid</span><span class="s5">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>&lt;p className=</span><span class="s4">"text-3xl font-black text-indigo-600"</span><span class="s2">&gt;${a.currentBid}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span>&lt;div className=</span><span class="s4">"text-right"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                               </span>&lt;p className=</span><span class="s2">"text-[10px] font-bold text-indigo-400 uppercase tracking-widest mb-1"</span><span class="s5">&gt;</span><span class="s3">Highest</span><span class="s5"> </span><span class="s3">Bidder</span><span class="s5">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>&lt;p className=</span><span class="s4">"text-sm font-bold"</span><span class="s2">&gt;{a.highestBidder || </span><span class="s4">'None'</span><span class="s2">}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>{!isEnded ? (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;form onSubmit={(e) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>e.preventDefault();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>placeBid(a.id, a.currentBid, e.target.bid.value);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>e.target.reset();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>}} className=</span><span class="s4">"flex gap-2"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;input name=</span><span class="s4">"bid"</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"number"</span><span class="s2"> step=</span><span class="s4">"1"</span><span class="s2"> min={a.currentBid + </span><span class="s7">1</span><span class="s2">} placeholder={</span><span class="s4">`Min </span><span class="s10">$</span><span class="s2">${a.currentBid + </span><span class="s7">1</span><span class="s2">}</span><span class="s4">`</span><span class="s2">} className=</span><span class="s4">"flex-1 bg-gray-100 rounded-xl px-4 font-bold outline-none focus:ring-2 focus:ring-indigo-500/20"</span><span class="s2"> required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;</span><span class="s3">Button</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"submit"</span><span class="s2"> variant=</span><span class="s4">"dark"</span><span class="s2"> disabled={user.role === </span><span class="s4">'seller'</span><span class="s2">}&gt;</span><span class="s3">Bid</span><span class="s2">&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>) : (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                            </span>&lt;div className=</span><span class="s2">"bg-red-50 text-red-600 font-bold text-center py-3 rounded-xl uppercase tracking-widest text-xs"</span><span class="s5">&gt;</span><span class="s3">Auction</span><span class="s5"> </span><span class="s3">Ended</span><span class="s5">&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>{user.role === </span><span class="s4">'seller'</span><span class="s2"> &amp;&amp; &lt;p className=</span><span class="s4">"text-[10px] text-center text-gray-400 mt-2"</span><span class="s2">&gt;</span><span class="s3">Sellers</span><span class="s2"> cannot bid&lt;/p&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>})}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>{auctions.length === </span><span class="s7">0</span><span class="s2"> &amp;&amp; &lt;p className=</span><span class="s4">"text-center text-gray-400 font-bold py-10"</span><span class="s2">&gt;</span><span class="s3">No</span><span class="s2"> active auctions.&lt;/p&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{view === </span><span class="s4">'reels'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"max-w-md mx-auto h-[80vh] bg-black rounded-[2rem] overflow-hidden shadow-2xl relative animate-in fade-in"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s4">"absolute top-4 right-4 z-20"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;button onClick={() =&gt; setMuted(!muted)} className=</span><span class="s4">"bg-black/50 p-2 rounded-full text-white backdrop-blur-md"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>{muted ? &lt;</span><span class="s3">VolumeX</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">}/&gt; : &lt;</span><span class="s3">Volume2</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">}/&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s2">"snap-y snap-mandatory h-full overflow-y-scroll no-scrollbar scroll-smooth"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>{products.map(p =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                   </span>&lt;div key={p.id} className=</span><span class="s2">"snap-center h-full w-full relative flex items-center justify-center bg-gray-900"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>{p.mediaUrl ? (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>isVideo(p.mediaUrl) ? (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;video src={p.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2"> autoPlay muted={muted} loop playsInline /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>) : &lt;img src={p.mediaUrl} alt={p.name} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>) : &lt;div className=</span><span class="s4">"text-9xl animate-bounce"</span><span class="s2">&gt;{p.icon}&lt;/div&gt;}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                      </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;div className=</span><span class="s2">"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent pointer-events-none"</span><span class="s5">&gt;&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;div className=</span><span class="s2">"absolute bottom-0 left-0 right-0 p-8 pb-12 text-white"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>&lt;div className=</span><span class="s4">"flex items-end justify-between"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>&lt;div className=</span><span class="s4">"flex items-center gap-2 mb-2"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                                  </span>&lt;div className=</span><span class="s2">"bg-indigo-600 w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs"</span><span class="s5">&gt;{p.sellerUsername[</span><span class="s7">0</span><span class="s5">]}&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                  </span>&lt;span className=</span><span class="s4">"font-bold text-sm text-indigo-200"</span><span class="s2">&gt;</span><span class="s10">@</span><span class="s2">{p.sellerUsername}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                  </span>{p.sellerAuthorized &amp;&amp; &lt;</span><span class="s3">BadgeCheck</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"text-blue-400"</span><span class="s2">/&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>&lt;h2 className=</span><span class="s4">"text-3xl font-black mb-1"</span><span class="s2">&gt;{p.name}&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>&lt;p className=</span><span class="s4">"text-2xl font-bold text-green-400"</span><span class="s2">&gt;${p.price}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;div className=</span><span class="s4">"flex flex-col gap-4 pointer-events-auto"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>&lt;button onClick={() =&gt; setActiveProduct(p)} className=</span><span class="s4">"bg-white/10 backdrop-blur p-3 rounded-full hover:bg-white/20"</span><span class="s2">&gt;&lt;</span><span class="s3">MessageSquare</span><span class="s2"> size={</span><span class="s7">24</span><span class="s2">} text-white/&gt;&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>{user.role === </span><span class="s4">'buyer'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;button onClick={() =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                    </span>setCart(prev =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                        </span></span><span class="s1">const</span><span class="s2"> ex = prev.find(i =&gt; i.id === p.id);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                        </span></span><span class="s1">return</span><span class="s2"> ex ? prev.map(i =&gt; i.id === p.id ? {...i, quantity: i.quantity+</span><span class="s7">1</span><span class="s2">} : i) : [...prev, {...p, quantity: </span><span class="s7">1</span><span class="s2">}];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                    </span>});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                    </span>notify(</span><span class="s4">"Added to Cart!"</span><span class="s2">);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                                </span>}} className=</span><span class="s2">"bg-white text-black p-4 rounded-full shadow-lg active:scale-90 transition-transform"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                    </span>&lt;</span><span class="s3">Plus</span><span class="s2"> size={</span><span class="s7">24</span><span class="s2">}/&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{view === </span><span class="s4">'dashboard'</span><span class="s2"> &amp;&amp; user.role === </span><span class="s4">'seller'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"grid lg:grid-cols-12 gap-8 lg:gap-12 animate-in fade-in duration-500"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s4">"lg:col-span-4 space-y-8"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s2">"bg-white p-6 rounded-[2rem] border border-gray-100 shadow-sm text-center"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;div className=</span><span class="s2">"w-20 h-20 bg-indigo-50 rounded-full mx-auto flex items-center justify-center text-3xl mb-4"</span><span class="s5">&gt;{user.username[</span><span class="s7">0</span><span class="s5">]}&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;h3 className=</span><span class="s2">"font-black text-xl flex items-center justify-center gap-2"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>{user.username} {user.isAuthorized &amp;&amp; &lt;</span><span class="s3">BadgeCheck</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">} className=</span><span class="s4">"text-blue-500 fill-blue-100"</span><span class="s2">/&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/h3&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;p className=</span><span class="s4">"text-gray-400 text-sm mb-4"</span><span class="s2">&gt;</span><span class="s3">Seller</span><span class="s2"> </span><span class="s3">Account</span><span class="s2">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;</span><span class="s3">Button</span><span class="s2"> onClick={toggleAuthorized} variant=</span><span class="s4">"outline"</span><span class="s2"> className=</span><span class="s4">"w-full text-xs"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>{user.isAuthorized ? </span><span class="s4">"Remove Auth Tag"</span><span class="s2"> : </span><span class="s4">"Verify Account (Demo)"</span><span class="s2">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">               </span>{</span><span class="s2">/* Add Product Form */</span><span class="s5">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s2">"bg-white p-6 sm:p-8 rounded-[2rem] border border-gray-100 shadow-sm"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                 </span>&lt;h3 className=</span><span class="s2">"text-xl font-black mb-6 flex items-center gap-2"</span><span class="s5">&gt;&lt;</span><span class="s3">Plus</span><span class="s5"> className=</span><span class="s2">"text-indigo-600"</span><span class="s5">/&gt; </span><span class="s3">List</span><span class="s5"> </span><span class="s3">New</span><span class="s5"> </span><span class="s3">Item</span><span class="s5">&lt;/h3&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;form onSubmit={(e) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>e.preventDefault();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span></span><span class="s1">const</span><span class="s2"> fd = </span><span class="s1">new</span><span class="s2"> </span><span class="s3">FormData</span><span class="s2">(e.target);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>addProduct(fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'name'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'price'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'icon'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'mediaUrl'</span><span class="s2">));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>e.target.reset();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>}}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Item Icon"</span><span class="s2"> name=</span><span class="s4">"icon"</span><span class="s2"> placeholder=</span><span class="s4">"🎁"</span><span class="s2"> required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Item Name"</span><span class="s2"> name=</span><span class="s4">"name"</span><span class="s2"> placeholder=</span><span class="s4">"Pro Gadget"</span><span class="s2"> required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Price ($)"</span><span class="s2"> name=</span><span class="s4">"price"</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"number"</span><span class="s2"> placeholder=</span><span class="s4">"49.99"</span><span class="s2"> icon={</span><span class="s3">DollarSign</span><span class="s2">} required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Photo/Video URL"</span><span class="s2"> name=</span><span class="s4">"mediaUrl"</span><span class="s2"> placeholder=</span><span class="s4">"https://..."</span><span class="s2"> icon={</span><span class="s3">ImageIcon</span><span class="s2">} /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Button</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"submit"</span><span class="s2"> className=</span><span class="s4">"w-full py-4 mt-2 shadow-none"</span><span class="s2"> variant=</span><span class="s4">"dark"</span><span class="s2">&gt;</span><span class="s3">Post</span><span class="s2"> to </span><span class="s3">Cloud</span><span class="s2">&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">               </span>{</span><span class="s2">/* Add Auction Form */</span><span class="s5">}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s2">"bg-white p-6 sm:p-8 rounded-[2rem] border border-gray-100 shadow-sm"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                 </span>&lt;h3 className=</span><span class="s2">"text-xl font-black mb-6 flex items-center gap-2"</span><span class="s5">&gt;&lt;</span><span class="s3">Gavel</span><span class="s5"> className=</span><span class="s2">"text-indigo-600"</span><span class="s5">/&gt; </span><span class="s3">Start</span><span class="s5"> </span><span class="s3">Auction</span><span class="s5">&lt;/h3&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;form onSubmit={(e) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>e.preventDefault();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span></span><span class="s1">const</span><span class="s2"> fd = </span><span class="s1">new</span><span class="s2"> </span><span class="s3">FormData</span><span class="s2">(e.target);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>startAuction(fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'name'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'price'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'duration'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'icon'</span><span class="s2">), fd.</span><span class="s1">get</span><span class="s2">(</span><span class="s4">'mediaUrl'</span><span class="s2">));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>e.target.reset();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>}}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Auction Item Name"</span><span class="s2"> name=</span><span class="s4">"name"</span><span class="s2"> placeholder=</span><span class="s4">"Rare Item"</span><span class="s2"> required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Start Price ($)"</span><span class="s2"> name=</span><span class="s4">"price"</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"number"</span><span class="s2"> placeholder=</span><span class="s4">"10.00"</span><span class="s2"> icon={</span><span class="s3">DollarSign</span><span class="s2">} required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Duration (Hours)"</span><span class="s2"> name=</span><span class="s4">"duration"</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"number"</span><span class="s2"> placeholder=</span><span class="s4">"24"</span><span class="s2"> icon={</span><span class="s3">Clock</span><span class="s2">} required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Icon"</span><span class="s2"> name=</span><span class="s4">"icon"</span><span class="s2"> placeholder=</span><span class="s4">"💎"</span><span class="s2"> required /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Input</span><span class="s2"> label=</span><span class="s4">"Photo/Video URL"</span><span class="s2"> name=</span><span class="s4">"mediaUrl"</span><span class="s2"> placeholder=</span><span class="s4">"https://..."</span><span class="s2"> icon={</span><span class="s3">ImageIcon</span><span class="s2">} /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Button</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"submit"</span><span class="s2"> className=</span><span class="s4">"w-full py-4 mt-2 shadow-none"</span><span class="s2"> variant=</span><span class="s4">"primary"</span><span class="s2">&gt;</span><span class="s3">Launch</span><span class="s2"> </span><span class="s3">Auction</span><span class="s2">&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">             </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s4">"lg:col-span-8 space-y-8"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;h2 className=</span><span class="s4">"text-2xl font-black"</span><span class="s2">&gt;</span><span class="s3">Manage</span><span class="s2"> </span><span class="s3">Orders</span><span class="s2">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>{orders.filter(o =&gt; o.items.some(i =&gt; i.sellerUsername === user.username)).map(order =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;div key={order.id} className=</span><span class="s2">"bg-white p-6 rounded-[2rem] border border-gray-100 shadow-sm"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;div className=</span><span class="s2">"flex justify-between items-start mb-4"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;span className=</span><span class="s4">"text-[10px] font-bold text-gray-400 uppercase tracking-wider"</span><span class="s2">&gt;</span><span class="s3">Order</span><span class="s2"> </span><span class="s10">#</span><span class="s2">{order.id.slice(-</span><span class="s7">6</span><span class="s2">)}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;div className=</span><span class="s4">"flex items-center gap-2 mt-1"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;span className={</span><span class="s4">`w-2 h-2 rounded-full </span><span class="s2">${order.status === </span><span class="s4">'delivered'</span><span class="s2"> ? </span><span class="s4">'bg-green-500'</span><span class="s2"> : </span><span class="s4">'bg-yellow-500'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">}&gt;&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;span className=</span><span class="s4">"font-bold text-sm uppercase"</span><span class="s2">&gt;{order.status}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>&lt;div className=</span><span class="s4">"flex gap-2"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>{[</span><span class="s4">'processing'</span><span class="s2">, </span><span class="s4">'shipped'</span><span class="s2">, </span><span class="s4">'delivered'</span><span class="s2">].map(s =&gt; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;button<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                    </span>key={s}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                    </span>onClick={() =&gt; updateOrderStatus(order.id, s)}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                                    </span>className={</span><span class="s2">`px-3 py-1 rounded-lg text-xs font-bold capitalize transition-colors </span><span class="s5">${order.status === s ? </span><span class="s2">'bg-indigo-600 text-white'</span><span class="s5"> : </span><span class="s2">'bg-gray-100 text-gray-500 hover:bg-gray-200'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                    </span>{s}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;div className=</span><span class="s4">"space-y-2"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>{order.items.filter(i =&gt; i.sellerUsername === user.username).map((item, idx) =&gt; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                              </span>&lt;div key={idx} className=</span><span class="s4">"flex items-center justify-between text-sm"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                  </span>&lt;span className=</span><span class="s4">"flex items-center gap-2"</span><span class="s2">&gt;{item.icon} {item.name} &lt;span className=</span><span class="s4">"text-gray-400"</span><span class="s2">&gt;x{item.quantity}&lt;/span&gt;&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                  </span>&lt;span className=</span><span class="s4">"font-mono"</span><span class="s2">&gt;${item.price}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>))}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">               </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;h2 className=</span><span class="s4">"text-2xl font-black mt-12"</span><span class="s2">&gt;</span><span class="s3">Your</span><span class="s2"> </span><span class="s3">Active</span><span class="s2"> </span><span class="s3">Auctions</span><span class="s2">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s4">"grid gap-4"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>{auctions.filter(a =&gt; a.sellerUsername === user.username).map(a =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;div key={a.id} className=</span><span class="s2">"bg-white p-4 rounded-2xl border border-gray-100 flex items-center gap-4"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                          </span>&lt;div className=</span><span class="s2">"w-16 h-16 bg-indigo-50 rounded-xl flex items-center justify-center text-2xl"</span><span class="s5">&gt;{a.icon}&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;div className=</span><span class="s4">"flex-1"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                              </span>&lt;h4 className=</span><span class="s4">"font-bold"</span><span class="s2">&gt;{a.name}&lt;/h4&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                              </span>&lt;p className=</span><span class="s4">"text-sm text-gray-500"</span><span class="s2">&gt;</span><span class="s3">Current</span><span class="s2"> </span><span class="s3">Bid</span><span class="s2">: &lt;span className=</span><span class="s4">"text-indigo-600 font-bold"</span><span class="s2">&gt;${a.currentBid}&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                              </span>&lt;p className=</span><span class="s4">"text-xs text-gray-400"</span><span class="s2">&gt;</span><span class="s3">Ends</span><span class="s2"> </span><span class="s1">in</span><span class="s2">: &lt;</span><span class="s3">CountDown</span><span class="s2"> targetDate={a.endTime}/&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;button onClick={() =&gt; deleteProduct(a.id, </span><span class="s4">'auctions'</span><span class="s2">)} className=</span><span class="s4">"p-2 text-red-400 hover:bg-red-50 rounded-lg"</span><span class="s2">&gt;&lt;</span><span class="s3">Trash2</span><span class="s2"> size={</span><span class="s7">18</span><span class="s2">}/&gt;&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;h2 className=</span><span class="s4">"text-2xl font-black mt-12"</span><span class="s2">&gt;</span><span class="s3">Your</span><span class="s2"> </span><span class="s3">Inventory</span><span class="s2">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;div className=</span><span class="s4">"grid gap-4"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>{products.filter(p =&gt; p.sellerUsername === user.username).map(p =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                   </span>&lt;div key={p.id} className=</span><span class="s2">"bg-white p-4 rounded-2xl border border-gray-100 flex items-center gap-4 sm:gap-6 group"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                     </span>&lt;div className=</span><span class="s2">"w-16 h-16 bg-gray-50 rounded-2xl overflow-hidden flex-shrink-0 flex items-center justify-center"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>{p.mediaUrl ? &lt;img src={p.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2">/&gt; : &lt;span className=</span><span class="s4">"text-3xl"</span><span class="s2">&gt;{p.icon}&lt;/span&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;div className=</span><span class="s4">"flex-1 min-w-0"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;h4 className=</span><span class="s4">"font-bold text-lg truncate"</span><span class="s2">&gt;{p.name}&lt;/h4&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;p className=</span><span class="s4">"text-indigo-600 font-bold"</span><span class="s2">&gt;${p.price}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;div className=</span><span class="s4">"flex gap-4 mt-1 text-xs text-gray-400"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;span className=</span><span class="s4">"flex items-center gap-1"</span><span class="s2">&gt;&lt;</span><span class="s3">ThumbsUp</span><span class="s2"> size={</span><span class="s7">10</span><span class="s2">}/&gt; {p.likes?.length || </span><span class="s7">0</span><span class="s2">}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>&lt;span className=</span><span class="s4">"flex items-center gap-1"</span><span class="s2">&gt;&lt;</span><span class="s3">MessageSquare</span><span class="s2"> size={</span><span class="s7">10</span><span class="s2">}/&gt; {p.comments?.length || </span><span class="s7">0</span><span class="s2">}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;button onClick={() =&gt; deleteProduct(p.id)} className=</span><span class="s4">"p-3 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all"</span><span class="s2">&gt;&lt;</span><span class="s3">Trash2</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">}/&gt;&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{view === </span><span class="s4">'orders'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"max-w-3xl mx-auto space-y-6 animate-in fade-in duration-500"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;h2 className=</span><span class="s4">"text-3xl font-black mb-8"</span><span class="s2">&gt;</span><span class="s3">Order</span><span class="s2"> </span><span class="s3">History</span><span class="s2">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{orders.map(order =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div key={order.id} className=</span><span class="s2">"bg-white rounded-[2rem] border border-gray-100 overflow-hidden shadow-sm"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>&lt;div className=</span><span class="s2">"p-6 bg-slate-50 flex justify-between items-center border-b border-gray-100"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                     </span>&lt;p className=</span><span class="s2">"text-[10px] font-bold text-gray-400 uppercase tracking-[0.2em] mb-1"</span><span class="s5">&gt;</span><span class="s3">Order</span><span class="s5"> </span><span class="s3">ID</span><span class="s5">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;p className=</span><span class="s4">"font-mono text-xs text-indigo-600"</span><span class="s2">&gt;</span><span class="s10">#</span><span class="s2">{order.id.slice(-</span><span class="s7">8</span><span class="s2">)}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;div className=</span><span class="s4">"text-right"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                     </span>&lt;p className=</span><span class="s2">"text-[10px] font-bold text-gray-400 uppercase tracking-[0.2em] mb-1"</span><span class="s5">&gt;</span><span class="s3">Total</span><span class="s5"> </span><span class="s3">Paid</span><span class="s5">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;p className=</span><span class="s4">"font-black text-xl"</span><span class="s2">&gt;${order.total.toFixed(</span><span class="s7">2</span><span class="s2">)}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;div className=</span><span class="s4">"p-6 relative"</span><span class="s2">&gt;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                  </span>{</span><span class="s2">/* Status Timeline */</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;div className=</span><span class="s4">"mb-8"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;p className=</span><span class="s4">"text-xs font-bold text-gray-500 mb-2 uppercase"</span><span class="s2">&gt;</span><span class="s3">Status</span><span class="s2">: &lt;span className=</span><span class="s4">"text-indigo-600"</span><span class="s2">&gt;{order.status}&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                     </span>&lt;</span><span class="s3">OrderStatusStepper</span><span class="s2"> currentStatus={order.status} /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;div className=</span><span class="s4">"space-y-4"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>{order.items.map((it, idx) =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                        </span>&lt;div key={idx} className=</span><span class="s2">"flex justify-between items-center text-sm font-bold"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;div className=</span><span class="s4">"flex items-center gap-3"</span><span class="s2">&gt;&lt;span className=</span><span class="s4">"text-xl"</span><span class="s2">&gt;{it.icon}&lt;/span&gt; {it.name} &lt;span className=</span><span class="s4">"text-gray-300"</span><span class="s2">&gt;x{it.quantity}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;span&gt;${(it.price * it.quantity).toFixed(</span><span class="s7">2</span><span class="s2">)}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;div className=</span><span class="s2">"pt-6 mt-4 border-t border-gray-100 flex justify-between items-center"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;span className=</span><span class="s2">"text-xs font-bold text-emerald-500 flex items-center gap-1"</span><span class="s5">&gt;&lt;</span><span class="s3">Globe</span><span class="s5"> size={</span><span class="s7">12</span><span class="s5">}/&gt; </span><span class="s3">Cloud</span><span class="s5"> </span><span class="s3">Verified</span><span class="s5">&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">Button</span><span class="s2"> variant=</span><span class="s4">"secondary"</span><span class="s2"> onClick={() =&gt; setActiveOrderChat(order)} className=</span><span class="s4">"!py-2 !px-4 text-xs shadow-none"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;</span><span class="s3">MessageSquare</span><span class="s2"> size={</span><span class="s7">14</span><span class="s2">}/&gt; {order.messages.length} </span><span class="s3">Messages</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{view === </span><span class="s4">'cart'</span><span class="s2"> &amp;&amp; (</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">// Only buyers can see cart content effectively</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">           </span>&lt;div className=</span><span class="s2">"max-w-5xl mx-auto grid lg:grid-cols-3 gap-12 animate-in fade-in duration-500"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s4">"lg:col-span-2 space-y-6"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;h2 className=</span><span class="s4">"text-3xl font-black mb-8"</span><span class="s2">&gt;</span><span class="s3">Your</span><span class="s2"> </span><span class="s3">Cart</span><span class="s2">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>{cart.map(item =&gt; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;div key={item.id} className=</span><span class="s2">"bg-white p-6 rounded-[2rem] border border-gray-100 flex items-center gap-6"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s2">"w-20 h-20 bg-indigo-50 flex-shrink-0 flex items-center justify-center rounded-[1.5rem] overflow-hidden"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>{item.mediaUrl ? &lt;img src={item.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2">/&gt; : &lt;span className=</span><span class="s4">"text-4xl"</span><span class="s2">&gt;{item.icon}&lt;/span&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s4">"flex-1 min-w-0"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;h4 className=</span><span class="s4">"font-bold text-xl truncate"</span><span class="s2">&gt;{item.name}&lt;/h4&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;p className=</span><span class="s4">"text-gray-400 font-bold tracking-tight"</span><span class="s2">&gt;${item.price} per unit&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s2">"flex items-center gap-4 bg-gray-50 p-2 rounded-xl"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;button onClick={() =&gt; setCart(cart.map(i =&gt; i.id === item.id ? {...i, quantity: </span><span class="s3">Math</span><span class="s2">.max(</span><span class="s7">1</span><span class="s2">, i.quantity-</span><span class="s7">1</span><span class="s2">)} : i))} className=</span><span class="s4">"w-8 h-8 flex items-center justify-center hover:bg-white rounded-lg transition-colors font-bold text-gray-400"</span><span class="s2">&gt;-&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;span className=</span><span class="s4">"font-black w-4 text-center"</span><span class="s2">&gt;{item.quantity}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span>&lt;button onClick={() =&gt; setCart(cart.map(i =&gt; i.id === item.id ? {...i, quantity: i.quantity+</span><span class="s7">1</span><span class="s2">} : i))} className=</span><span class="s4">"w-8 h-8 flex items-center justify-center hover:bg-white rounded-lg transition-colors font-bold text-gray-400"</span><span class="s2">&gt;+&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>))}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>{cart.length === </span><span class="s7">0</span><span class="s5"> &amp;&amp; &lt;div className=</span><span class="s2">"text-center py-20 bg-slate-50 rounded-[2rem] border-2 border-dashed border-gray-100 text-gray-400 font-bold"</span><span class="s5">&gt;</span><span class="s3">Your</span><span class="s5"> cart </span><span class="s1">is</span><span class="s5"> empty&lt;/div&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;div className=</span><span class="s4">"lg:col-span-1"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>&lt;div className=</span><span class="s2">"bg-white p-8 rounded-[2rem] border border-indigo-100 shadow-xl shadow-indigo-100/20 sticky top-24"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;h3 className=</span><span class="s4">"text-xl font-black mb-6"</span><span class="s2">&gt;</span><span class="s3">Summary</span><span class="s2">&lt;/h3&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;div className=</span><span class="s4">"space-y-4 mb-8"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;div className=</span><span class="s4">"flex justify-between text-gray-400 font-bold"</span><span class="s2">&gt;&lt;span&gt;</span><span class="s3">Subtotal</span><span class="s2">&lt;/span&gt;&lt;span&gt;${cart.reduce((s,i)=&gt;s+(i.price*i.quantity),</span><span class="s7">0</span><span class="s2">).toFixed(</span><span class="s7">2</span><span class="s2">)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;div className=</span><span class="s4">"flex justify-between text-slate-900 font-black text-2xl"</span><span class="s2">&gt;&lt;span&gt;</span><span class="s3">Total</span><span class="s2">&lt;/span&gt;&lt;span&gt;${cart.reduce((s,i)=&gt;s+(i.price*i.quantity),</span><span class="s7">0</span><span class="s2">).toFixed(</span><span class="s7">2</span><span class="s2">)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;</span><span class="s3">Button</span><span class="s2"> onClick={placeOrder} className=</span><span class="s4">"w-full py-4 text-lg"</span><span class="s2"> disabled={cart.length === </span><span class="s7">0</span><span class="s2">}&gt;</span><span class="s3">Complete</span><span class="s2"> </span><span class="s3">Purchase</span><span class="s2">&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                   </span>&lt;p className=</span><span class="s2">"text-[10px] text-gray-400 text-center mt-4 font-bold uppercase tracking-widest"</span><span class="s5">&gt;</span><span class="s3">Secured</span><span class="s5"> by </span><span class="s3">Levstore</span><span class="s5"> </span><span class="s3">Cloud</span><span class="s5">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">           </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/main&gt;</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span>{</span><span class="s2">/* Product Details &amp; Comments Modal */</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>{activeProduct &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"fixed inset-0 bg-gray-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-200"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>&lt;div className=</span><span class="s2">"p-6 bg-white border-b border-gray-100 flex justify-between items-center sticky top-0 z-10"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;h3 className=</span><span class="s4">"font-black text-xl"</span><span class="s2">&gt;{activeProduct.name}&lt;/h3&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;button onClick={() =&gt; setActiveProduct(</span><span class="s1">null</span><span class="s2">)} className=</span><span class="s4">"p-2 bg-gray-100 rounded-full hover:bg-gray-200"</span><span class="s2">&gt;&lt;</span><span class="s3">X</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">}/&gt;&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;div className=</span><span class="s4">"flex-1 overflow-y-auto p-6"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s4">"flex gap-4 mb-6"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                        </span>&lt;div className=</span><span class="s2">"w-24 h-24 bg-gray-50 rounded-2xl flex items-center justify-center overflow-hidden flex-shrink-0"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>{activeProduct.mediaUrl ? (isVideo(activeProduct.mediaUrl) ? &lt;video src={activeProduct.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2">/&gt; : &lt;img src={activeProduct.mediaUrl} className=</span><span class="s4">"w-full h-full object-cover"</span><span class="s2">/&gt;) : &lt;span className=</span><span class="s4">"text-4xl"</span><span class="s2">&gt;{activeProduct.icon}&lt;/span&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;p className=</span><span class="s4">"text-2xl font-black text-indigo-600"</span><span class="s2">&gt;${activeProduct.price}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;p className=</span><span class="s4">"text-sm font-bold text-gray-500"</span><span class="s2">&gt;</span><span class="s3">Seller</span><span class="s2">: </span><span class="s10">@</span><span class="s2">{activeProduct.sellerUsername}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;div className=</span><span class="s4">"flex gap-4 mt-2"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;button onClick={() =&gt; handleLike(activeProduct.id, activeProduct.likes)} className={</span><span class="s4">`flex items-center gap-1 font-bold </span><span class="s2">${activeProduct.likes?.includes(user.username) ? </span><span class="s4">'text-green-600'</span><span class="s2"> : </span><span class="s4">'text-gray-400'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">}&gt;&lt;</span><span class="s3">ThumbsUp</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">}/&gt; {activeProduct.likes?.length || </span><span class="s7">0</span><span class="s2">}&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;button onClick={() =&gt; handleDislike(activeProduct.id, activeProduct.dislikes)} className={</span><span class="s4">`flex items-center gap-1 font-bold </span><span class="s2">${activeProduct.dislikes?.includes(user.username) ? </span><span class="s4">'text-red-600'</span><span class="s2"> : </span><span class="s4">'text-gray-400'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">}&gt;&lt;</span><span class="s3">ThumbsDown</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">}/&gt; {activeProduct.dislikes?.length || </span><span class="s7">0</span><span class="s2">}&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;h4 className=</span><span class="s4">"font-bold text-lg mb-4"</span><span class="s2">&gt;</span><span class="s3">Comments</span><span class="s2">&lt;/h4&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;div className=</span><span class="s4">"space-y-4 mb-6"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>{activeProduct.comments?.length === </span><span class="s7">0</span><span class="s2"> &amp;&amp; &lt;p className=</span><span class="s4">"text-gray-400 text-sm"</span><span class="s2">&gt;</span><span class="s3">No</span><span class="s2"> comments yet. </span><span class="s3">Be</span><span class="s2"> the first!&lt;/p&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>{activeProduct.comments?.map((c, i) =&gt; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;div key={i} className=</span><span class="s4">"bg-gray-50 p-4 rounded-2xl"</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;p className=</span><span class="s4">"text-xs font-bold text-gray-400 mb-1"</span><span class="s2">&gt;</span><span class="s10">@</span><span class="s2">{c.user}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                </span>&lt;p className=</span><span class="s4">"text-sm text-gray-800"</span><span class="s2">&gt;{c.text}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;form onSubmit={(e) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>e.preventDefault();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s1">const</span><span class="s2"> val = e.target.comment.value;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>postComment(activeProduct.id, val);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>e.target.comment.value = </span><span class="s4">''</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>}} className=</span><span class="s4">"flex gap-2"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                        </span>&lt;input name=</span><span class="s2">"comment"</span><span class="s5"> className=</span><span class="s2">"flex-1 bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500/20"</span><span class="s5"> placeholder=</span><span class="s2">"Add a comment..."</span><span class="s5"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>&lt;</span><span class="s3">Button</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"submit"</span><span class="s2"> variant=</span><span class="s4">"dark"</span><span class="s2">&gt;</span><span class="s3">Post</span><span class="s2">&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>)}</span></p>
<p class="p5"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span>{</span><span class="s2">/* Chat Overlay */</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>{activeOrderChat &amp;&amp; (</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"fixed inset-0 bg-gray-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">           </span>&lt;div className=</span><span class="s2">"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col h-[650px] animate-in zoom-in-95 duration-200"</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"p-6 bg-indigo-600 text-white flex justify-between items-center"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;h4 className=</span><span class="s4">"font-black text-lg"</span><span class="s2">&gt;</span><span class="s3">Transaction</span><span class="s2"> </span><span class="s3">Chat</span><span class="s2">&lt;/h4&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;p className=</span><span class="s4">"text-xs text-indigo-200 font-bold tracking-widest uppercase"</span><span class="s2">&gt;</span><span class="s3">Order</span><span class="s2"> </span><span class="s10">#</span><span class="s2">{activeOrderChat.id.slice(-</span><span class="s7">6</span><span class="s2">)}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>&lt;button onClick={() =&gt; setActiveOrderChat(</span><span class="s1">null</span><span class="s2">)} className=</span><span class="s4">"p-3 bg-white/10 rounded-2xl hover:bg-white/20 transition-all"</span><span class="s2">&gt;&lt;</span><span class="s3">X</span><span class="s2">/&gt;&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>{activeOrderChat.messages.map((m, i) =&gt; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;div key={i} className={</span><span class="s4">`flex flex-col </span><span class="s2">${m.sender === user.username ? </span><span class="s4">'items-end'</span><span class="s2"> : </span><span class="s4">'items-start'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">}&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;div className={</span><span class="s2">`max-w-[85%] p-4 rounded-2xl font-medium text-sm shadow-sm </span><span class="s5">${m.sender === user.username ? </span><span class="s2">'bg-indigo-600 text-white rounded-tr-none'</span><span class="s5"> : </span><span class="s2">'bg-white text-slate-900 rounded-tl-none'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span>{m.text}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                      </span>&lt;span className=</span><span class="s2">"text-[10px] font-bold text-gray-400 mt-1 uppercase tracking-tighter"</span><span class="s5">&gt;{m.sender}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;form className=</span><span class="s2">"p-4 bg-white border-t border-gray-100 flex gap-3"</span><span class="s5"> onSubmit={(e) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>e.preventDefault();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">const</span><span class="s2"> msg = e.target.msg.value;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">if</span><span class="s2">(!msg.trim()) </span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>sendMessage(activeOrderChat.id, msg);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>e.target.msg.value = </span><span class="s4">''</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>}}&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>&lt;input name=</span><span class="s2">"msg"</span><span class="s5"> className=</span><span class="s2">"flex-1 bg-gray-100 rounded-2xl px-6 py-3.5 focus:ring-4 focus:ring-indigo-500/10 outline-none font-medium transition-all"</span><span class="s5"> placeholder=</span><span class="s2">"Message..."</span><span class="s5"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">Button</span><span class="s2"> </span><span class="s1">type</span><span class="s2">=</span><span class="s4">"submit"</span><span class="s2"> variant=</span><span class="s4">"dark"</span><span class="s2"> className=</span><span class="s4">"!p-3.5 rounded-2xl"</span><span class="s2">&gt;&lt;</span><span class="s3">Send</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">}/&gt;&lt;/</span><span class="s3">Button</span><span class="s2">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">           </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>);</span></p>
<p class="p1"><span class="s2">}</span></p>
</body>
</html>
